###
### Setup myNode Free
### Start with <device>_free_layer_2.img
###

##################################################################

# Log in as admin


# Copy myNode Free rootfs on top of existing image
sudo scp -r taylorhelsper@192.168.86.115:~/GitHub/myNode/out/rootfs_free/* /
sync

# Setup myNode Startup Script
sudo systemctl enable ufw
sudo systemctl enable mynode
sudo systemctl enable quicksync
sudo systemctl enable bandwidth
sudo systemctl enable www
sudo systemctl enable drive_check
sudo systemctl enable torrent_check
sudo systemctl enable bitcoind.service
sudo systemctl enable lnd.service
sudo systemctl enable lnd_unlock.service
sudo systemctl enable lnd_admin_files
sudo systemctl daemon-reload

# Delete junk
sudo rm -rf /home/admin/download
sudo rm -rf /home/admin/.bash_history
sudo rm -rf /home/bitcoin/.bash_history
sudo rm -rf /root/.bash_history
sudo rm -rf /root/.ssh/known_hosts
sudo rm -rf /etc/resolv.conf
sudo rm -rf /tmp/*

sync

### MAKE IMAGE NOW ###
# This prevents auto gen files like certs to be part of the base image
# Must make sure image can boot after this point and fully come up


# Reboot again
sudo reboot